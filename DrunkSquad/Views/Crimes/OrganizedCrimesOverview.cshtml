@model DrunkSquad.Models.Faction.FactionCrimes

@using DrunkSquad.Logic.Extensions;

@{
    ViewData ["Title"] = "OC Overview";
}

<div>
    <div>
        <h1><b>Organized Crimes Overview</b></h1>
    </div>

        <div class="row">
            <div class="col">Total Money Gained: @Model.TotalMoneyGained.ToString("C")</div>
            <div class="col">Total Rep Gained: @Model.TotalRepGained.ToString("N0")</div>
            <div class="col">Success Rate: @Model.SuccessRate.ToString("P")</div>
        </div>
    
    <table class="table">
        <tr>
            <th>Name</th>
            <th>Status</th>
            <th>Time Started</th>
            <th>Time Ready</th>
            <th>Participants</th>
            <th>Money Gained</th>
            <th>Respect Gained</th>
        </tr>
        @foreach (var crime in Model.Crimes.OrderByDescending(crime => crime.TimeStarted)) {
            <tr>
                <td>@crime.Name</td>
                <td>@crime.CurrentStateString</td>
                <td>@DateTimeOffset.FromUnixTimeSeconds(crime.TimeStarted).UtcDateTime.ToString()</td>
                <td>@DateTimeOffset.FromUnixTimeSeconds(crime.TimeReady).UtcDateTime.ToString()</td>
                <td>@string.Join(", ", crime.ParticipantNames)</td>
                    @if (crime.Initiated)
                    {
                        <td>@crime.MoneyGain.ToString("C")</td>
                        <td>@crime.RespectGain.ToString("N0")</td>
                    }
                    else
                    {
                        <td>Waiting...</td>
                        <td>Waiting...</td>
                    }
            </tr>
        }
    </table>
</div>